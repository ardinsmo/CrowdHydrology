<!DOCTYPE html>
<html>
  <head>
    <title>Group 6: Water Level Wizards</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no"">
      
      <link rel="apple-touch-icon" href="/custom_icon.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <script type="text/javascript">
  if(("standalone" in window.navigator) && window.navigator.standalone){
    var noddy, remotes = false;
    document.addEventListener('click', function(event) {
      noddy = event.target;
      while(noddy.nodeName !== "A" && noddy.nodeName !== "HTML") {
	noddy = noddy.parentNode;
      }
      if('href' in noddy && noddy.href.indexOf('http') !== -1 && (noddy.href.indexOf(document.location.host) !== -1 || remotes)){
	event.preventDefault();
	document.location.href = noddy.href;
      }
    },false);
  }
  </script>
      
    <!-- Bootstrap -->
    <link href="./dist/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Raleway:400,300,200,100,500' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Montserrat+Alternates|Hammersmith+One' rel='stylesheet' type='text/css'>
    <link href="./navbar-green.css" rel="stylesheet" media="screen">
        
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
    

  <style>
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      
  </style>
  
   <!--<script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDXZQIXaGIDgDn91PJMU09rCVB73ms22bo&sensor=true&libraries=visualization">
    </script>-->

    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="./dist/js/bootstrap.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
   
    <script src="./parse.js"></script>
    <!--<script src="./view.js"></script>-->
    <script src="http://www.parsecdn.com/js/parse-1.2.13.min.js"></script>

     </head>
  
  
  
<body style="padding-top: 50px;font-family: 'Raleway', sans-serif;">
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container-fluid">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">CrowdHydrology</a>
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="./index.html">Home</a></li>
        <li><a href="./submit.html">Submit</a></li>
        <li class="active"><a href="./view.html">View</a></li>
    </div>
  </div>
</nav>
<div id="map" style="height: 100%"></div>

	<script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
	 <script src="./csvjson.js"></script>
	<script>

		var map = L.map('map').setView([51.505, -0.09], 13);

		L.tileLayer('http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>'
		}).addTo(map);

                
                $.ajax("./NY1009.csv", {
                    success: function(data) {
                        //alert("presuccess");
                        var jsonobject = csvJSON(data)
                        // Now use jsonobject to do some charting...
			//alert("print");
                        //$("#json").val(jsonobject);
			var json=jQuery.parseJSON( jsonobject );
			//alert(json[0]["Date and Time"]);
			//alert(json.length);
			
                    },
                    error: function() {
                        // Show some error message, couldn't get the CSV file
                        alert("failed");
                    }
                });
                
		function csvJSON(csv){
 
  var lines=csv.split("\n");
 
  var result = [];
 
  var headers=lines[0].split(",");
 
  for(var i=1;i<lines.length;i++){
 
	  var obj = {};
	  var currentline=lines[i].split(",");
 
	  for(var j=0;j<headers.length;j++){
		  obj[headers[j]] = currentline[j];
	  }
 
	  result.push(obj);
 
  }
  
  //return result; //JavaScript object
  return JSON.stringify(result); //JSON
}
		
  L.marker([51.5, -0.09]).addTo(map).bindPopup("<b>Gauge: NY1009</b><br />Magic River<br><a href=./data.html>View Data</a>").openPopup();
  L.marker([51.49, -0.13]).addTo(map).bindPopup("<b>Gauge: NY1009</b><br />Magic River<br><a href=./data.html>View Data</a>");
  L.marker([51.48, -0.1]).addTo(map).bindPopup("<b>Gauge: NY1009</b><br />Magic River<br><a href=./data.html>View Data</a>");
  L.marker([51.47, -0.19]).addTo(map).bindPopup("<b>Gauge: NY1009</b><br />Magic River<br><a href=./data.html>View Data</a>");
  L.marker([51.505, -0.08]).addTo(map).bindPopup("<b>Gauge: NY1009</b><br />Magic River<br><a href=./data.html>View Data</a>");
  L.marker([51.6, -0.07]).addTo(map).bindPopup("<b>Gauge: NY1009</b><br />Magic River<br><a href=./data.html>View Data</a>");
  L.marker([51.58, -0.06]).addTo(map).bindPopup("<b>Gauge: NY1009</b><br />Magic River<br><a href=./data.html>View Data</a>");
  L.marker([51.55, -0.05]).addTo(map).bindPopup("<b>Gauge: NY1009</b><br />Magic River<br><a href=./data.html>View Data</a>");
  L.marker([51.52, -0.04]).addTo(map).bindPopup("<b>Gauge: NY1009</b><br />Magic River<br><a href=./data.html>View Data</a>");
  L.marker([51.51, -0.03]).addTo(map).bindPopup("<b>Gauge: NY1009</b><br />Magic River<br><a href=./data.html>View Data</a>");
  var popup = L.popup();


	</script>

</body>
    
</html>
